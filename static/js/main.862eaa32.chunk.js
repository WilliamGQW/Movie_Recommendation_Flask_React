(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,a){e.exports={SearchResult:"SearchResult_SearchResult__5QuyZ",Item:"SearchResult_Item__3Y-Cm",Button:"SearchResult_Button__39rp0"}},13:function(e,t,a){e.exports={NavigationItems:"NavigationItems_NavigationItems__1fnFX",Item:"NavigationItems_Item__6K2Ni",active:"NavigationItems_active__3EugU"}},20:function(e,t,a){e.exports={FavoriteMovie:"FavoriteMovie_FavoriteMovie__cRJe3",Item:"FavoriteMovie_Item__1L_kG",Button:"FavoriteMovie_Button__aKwfa"}},28:function(e,t,a){e.exports={Toolbar:"Toolbar_Toolbar__ApScI",Logo:"Toolbar_Logo__3Lk47"}},31:function(e,t,a){e.exports={Button:"Button_Button__3R1xi",Save:"Button_Save__2is0_",Delete:"Button_Delete__3VrNe"}},43:function(e,t,a){e.exports=a.p+"static/media/movie-logo.71268b6e.png"},44:function(e,t,a){e.exports={Logo:"Logo_Logo__3Ec1t"}},45:function(e,t,a){e.exports={Content:"Layout_Content__PrDi6"}},46:function(e,t,a){e.exports={SearchResults:"SearchResults_SearchResults__2kZpi"}},47:function(e,t,a){e.exports={FavoriteMovies:"FavoriteMovies_FavoriteMovies__2Jcny"}},49:function(e,t,a){e.exports=a(78)},59:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(21),o=a.n(r),c=a(15),i=(a(25),a(58),a(59),a(3)),s=a(4),u=a(6),m=a(5),d=function(e){return e.children},v=a(28),h=a.n(v),f=a(43),g=a.n(f),p=a(44),E=a.n(p),b=function(e){return l.a.createElement("div",{className:E.a.Logo},l.a.createElement("img",{src:g.a,alt:"WebsiteLogo"}))},y=a(13),_=a.n(y),S=function(e){return l.a.createElement("ul",{className:_.a.NavigationItems},l.a.createElement("li",{className:_.a.Item},l.a.createElement(c.b,{to:"/",exact:!0,activeClassName:_.a.active},"Search")),l.a.createElement("li",{className:_.a.Item},l.a.createElement(c.b,{to:"/profile",exact:!0,activeClassName:_.a.active},"Profile")),e.isAuthenticated?l.a.createElement("li",{className:_.a.Item},l.a.createElement(c.b,{to:"/logout",activeClassName:_.a.active},"LogOut")):l.a.createElement("li",{className:_.a.Item},l.a.createElement(c.b,{to:"/login",activeClassName:_.a.active},"SignIn")),e.isAuthenticated?null:l.a.createElement("li",{className:_.a.Item},l.a.createElement(c.b,{to:"/register",activeClassName:_.a.active},"Register")))},k=function(e){return l.a.createElement("header",{className:h.a.Toolbar},l.a.createElement("div",{className:h.a.Logo},l.a.createElement(b,null)),l.a.createElement("div",null,l.a.createElement(S,{isAuthenticated:e.isAuthenticated})))},w=a(45),I=a.n(w),j=a(16),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={email:"",password:"",isAuthenticated:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(console.log(localStorage.usertoken),localStorage.usertoken){var e=localStorage.usertoken,t=Object(j.a)(e);console.log("decode",t),console.log("decode",t.identity.email),this.setState({email:t.identity.email,password:t.identity.password}),""!==this.state.email&&""!==this.state.password&&this.setState({isAuthenticated:!0})}}},{key:"render",value:function(){return l.a.createElement(d,null,l.a.createElement(k,{isAuthenticated:this.state.isAuthenticated}),l.a.createElement("main",{className:I.a.Content},this.props.children))}}]),a}(n.Component),N=a(11),H=a.n(N),C=function(e){return console.log("movie id is"),console.log(e.id),l.a.createElement("div",{className:H.a.SearchResult},l.a.createElement("div",{className:H.a.Item},e.name),l.a.createElement("div",{className:H.a.Item},e.genres),l.a.createElement("div",{className:H.a.Item},e.rating),l.a.createElement("button",{className:H.a.Button,onClick:function(){return e.clicked(e.id)}},"View Details"))},F=a(46),x=a.n(F),M=function(e){var t=e.results;return l.a.createElement("div",{className:x.a.SearchResults},l.a.createElement("div",{className:H.a.SearchResult},l.a.createElement("div",{className:H.a.Item},"Movie Name"),l.a.createElement("div",{className:H.a.Item},"Genres"),l.a.createElement("div",{className:H.a.Item},"Rating"),l.a.createElement("div",{className:H.a.Item},"Movie Page")),t.map((function(t){return l.a.createElement(C,{name:t[0],id:t[1],genres:t[2],rating:t[3],clicked:e.clicked})})))},R=a(14),T=a.n(R),L=function(e){return T.a.get("/search",{params:{name:e.name}}).then((function(e){return console.log("success"),e.data}))},D=function(e){return T.a.get("/getMovieInfo",{params:{mvId:e.mvId}}).then((function(e){return console.log("success"),e.data}))},A=function(e){return T.a.get("/checkUserFav",{params:{email:e.email,mvId:e.mvId}}).then((function(e){return console.log("success"),e.data})).catch((function(e){return e}))},B=function(e){return T.a.post("/addToFav",{email:e.email,mvId:e.mvId,title:e.title}).then((function(e){return console.log("Successfully added to Fav List"),e.data}))},P=function(e){return T.a.post("/deleteFromFav",{email:e.email,mvId:e.mvId,title:e.title}).then((function(e){return console.log("Successfully delete from Fav List"),e.data}))},U=function(e){return T.a.patch("/updateMovComment",{query:e.query}).then((function(e){return console.log(e),e.data}))},J=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={name:"",results:[]},e.componentDidMount=function(){e.setState({name:"",results:[]}),console.log(e.state)},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name};console.log(a),L(a).then((function(t){if(console.log("returned res",t),t.error)e.setState({results:[]});else{var a=t;e.setState({results:a})}}))},e.changeInputHandler=function(t){e.setState({name:t.target.value})},e.clickHandler=function(t){e.props.history.push("/movie/".concat(t))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:this.onSubmit},l.a.createElement("input",{onChange:function(t){return e.changeInputHandler(t)},value:this.state.name}),l.a.createElement("button",null,"Search")),this.state.results?l.a.createElement(M,{results:this.state.results,clicked:this.clickHandler}):null)}}]),a}(n.Component),q=a(31),V=a.n(q),G=function(e){return l.a.createElement("button",{className:[V.a.Button,V.a[e.btnType]].join(" "),onClick:function(){return e.clicked()}},e.children)},K=a(48),Y=function(e){var t=Object(n.useState)(!0),a=Object(K.a)(t,2),r=a[0],o=a[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:r?" icon-soucang2 soucang-color":"icon-soucang2",onClick:function(e){o(!r)}}))},Z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={title:"",id:"",genres:"",release_year:"",vote_average:"",original_language:"",runtime:"",directors:"",actors:"",overview:"",savedToFav:!1,btnType:"Save",myemail:"",comment:""},e.componentDidMount=function(){console.log(e.props.mvId);var t={mvId:e.props.mvId};if(D(t).then((function(t){if(console.log("returned res",t),!t.error){var a=t[0];console.log(a),e.setState({title:a[0],id:a[1],genres:a[2],release_year:a[3],vote_average:a[4],original_language:a[5],runtime:a[6],directors:a[7],actors:a[8],overview:a[9]})}})),console.log(e.state),localStorage.usertoken){var a=localStorage.usertoken,n=Object(j.a)(a).identity.email,l={mvId:e.props.mvId,email:n};A(l).then((function(t){console.log("returned res",t),t.error?e.setState({myemail:n}):e.setState({savedToFav:!0,myemail:n})}))}},e.clickHandler=function(){if(localStorage.usertoken)if(e.state.savedToFav){e.setState({savedToFav:!1,btnType:"Save"});var t=localStorage.usertoken,a={email:Object(j.a)(t).identity.email,mvId:e.state.id,title:e.state.title};console.log(a),P(a).then((function(e){console.log(e)}))}else{e.setState({savedToFav:!0,btnType:"Delete"});var n=localStorage.usertoken,l={email:Object(j.a)(n).identity.email,mvId:e.state.id,title:e.state.title};console.log(l),B(l).then((function(e){console.log(e)}))}},e.submitHandler=function(t){t.preventDefault();var a=localStorage.usertoken,n=Object(j.a)(a).identity.email,l={query:[e.state.comment,n,e.props.mvId]};console.log(l),U(l).then((function(e){console.log(e)}))},e.changeInputHandler=function(t){e.setState({comment:[t.target.value]})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("h3",null,this.state.title),l.a.createElement("p",null,this.state.genres),l.a.createElement("p",null,"Year: ",this.state.release_year),l.a.createElement("p",null,"Rating: ",this.state.vote_average),l.a.createElement("p",null,"Language: ",this.state.original_language),l.a.createElement("p",null,"Runtime: ",this.state.runtime),l.a.createElement("div",null,"Directors: ",this.state.directors),l.a.createElement("div",null,"Cast: ",this.state.actors),l.a.createElement("p",null,"Overview: ",this.state.overview),l.a.createElement(G,{clicked:this.clickHandler.bind(this),btnType:this.state.btnType},"Like"),l.a.createElement(Y,null),this.state.savedToFav?l.a.createElement("form",{onSubmit:this.submitHandler},l.a.createElement("input",{onChange:function(t){return e.changeInputHandler(t)},value:this.state.comment}),l.a.createElement("button",null,"Update your comment!")):null)}}]),a}(n.Component),Q=a(23),W=a(17),X=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).changeHandler=function(t){e.setState(Object(Q.a)({},t.target.name,t.target.value))},e.submitHandler=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};""!==e.state.email&&""!==e.state.password||window.alert("Please fill in all fields!"),function(e){return T.a.post("/login",{email:e.email,password:e.password}).then((function(e){return e.Error&&e.error?(console.log(e),e):(localStorage.setItem("usertoken",e.data),e.data)})).catch((function(e){console.log(e)}))}(a).then((function(t){console.log(t),"object"===typeof t?(window.alert("Account not found! Please try again"),localStorage.clear()):e.props.history.push("/")}))},e.state={email:"",password:"",error:{}},e.changeHandler=e.changeHandler.bind(Object(W.a)(e)),e.submitHandler=e.submitHandler.bind(Object(W.a)(e)),e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(t){return e.submitHandler(t)}},l.a.createElement("div",null,l.a.createElement("label",null,"email"),l.a.createElement("input",{name:"email",type:"text",value:this.state.email,onChange:function(t){return e.changeHandler(t)}})),l.a.createElement("div",null,l.a.createElement("label",null,"password"),l.a.createElement("input",{name:"password",type:"password",value:this.state.password,onChange:function(t){return e.changeHandler(t)}})),l.a.createElement("button",null,"Login")))}}]),a}(n.Component),z=a(20),$=a.n(z),ee=function(e){return console.log(e.id),l.a.createElement("div",{className:$.a.FavoriteMovie},l.a.createElement("div",{className:$.a.Item},e.title),l.a.createElement("div",{className:$.a.Item},e.desc),l.a.createElement("button",{onClick:function(){return e.clicked(e.id)},className:$.a.Button},"View Details"))},te=a(47),ae=a.n(te),ne=function(e){var t=e.results;return l.a.createElement("div",{className:ae.a.FavoriteMovies},t.map((function(t){return l.a.createElement(ee,{id:t.movie_id,title:t.title,desc:t.notes,clicked:e.clicked})})))},le=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={email:"",favs:[[1,"h","good"],[2,"asd","like it"],[3,"akw","!!!"],[4,"kjhuiwhf","kagdfhew hejkfaef"]]},e.clickHandler=function(t){e.props.history.push("/movie/".concat(t))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.usertoken){var t=localStorage.usertoken,a=Object(j.a)(t),n=a.identity.email;this.setState({email:a.identity.email}),console.log("iden",a.identity),console.log(this.state.email),function(e){return T.a.get("/getUserFav",{params:{email:e.email}}).then((function(e){return console.log("success"),e.data})).catch((function(e){return e}))}({email:n}).then((function(t){console.log(t),t.movies&&e.setState({favs:t.movies,email:n})}))}else this.props.history.push("/login")}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("table",{className:"table col-md-6 mx-auto"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"badge badge-dark text-white col-8"},"User: ",this.state.email," "),l.a.createElement("td",null,this.state.username))))),l.a.createElement("div",null,l.a.createElement("h3",null,"Favorite List"),l.a.createElement("div",null,l.a.createElement(ne,{results:this.state.favs,clicked:this.clickHandler}))),l.a.createElement("div",null,l.a.createElement("h3",null,"Recommended Movies")))}}]),a}(n.Component),re=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).changeHandler=function(t){e.setState(Object(Q.a)({},t.target.name,t.target.value))},e.submitHandler=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};""!==e.state.email&&""!==e.state.password||window.alert("Please fill in all fields!"),function(e){return T.a.post("/register",{email:e.email,password:e.password}).then((function(e){return e.success?(window.alert("Successfully registered!"),e.data):(console.log(typeof e),e)})).catch((function(t){""===e.email||""===e.password?window.alert("Please fill all the fields"):window.alert("This email has already registered.")}))}(a).then((function(t){"object"===typeof t?(console.log("res",t),e.props.history.push("/login")):localStorage.clear()}))},e.state={email:"",password:"",error:{}},e.changeHandler=e.changeHandler.bind(Object(W.a)(e)),e.submitHandler=e.submitHandler.bind(Object(W.a)(e)),e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(t){return e.submitHandler(t)}},l.a.createElement("div",null,l.a.createElement("label",null,"email"),l.a.createElement("input",{name:"email",type:"text",value:this.state.email,onChange:function(t){return e.changeHandler(t)}})),l.a.createElement("div",null,l.a.createElement("label",null,"password"),l.a.createElement("input",{name:"password",type:"password",value:this.state.password,onChange:function(t){return e.changeHandler(t)}})),l.a.createElement("button",null,"Register")))}}]),a}(n.Component),oe=a(2),ce=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(O,null,l.a.createElement(oe.c,null,l.a.createElement(oe.a,{path:"/",exact:!0,component:J}),l.a.createElement(oe.a,{path:"/movie/:id",exact:!0,component:function(e){return l.a.createElement(Z,{mvId:e.match.params.id})}}),l.a.createElement(oe.a,{path:"/login",exact:!0,component:X}),l.a.createElement(oe.a,{path:"/register",exact:!0,component:re}),l.a.createElement(oe.a,{path:"/profile",exact:!0,component:le}))))}}]),a}(n.Component),ie=Object(oe.f)(ce);o.a.render(l.a.createElement(c.a,null,l.a.createElement(ie,null)),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.862eaa32.chunk.js.map