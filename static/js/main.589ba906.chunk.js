(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,a){e.exports={SearchResult:"SearchResult_SearchResult__5QuyZ",Item:"SearchResult_Item__3Y-Cm",Button:"SearchResult_Button__39rp0"}},13:function(e,t,a){e.exports={NavigationItems:"NavigationItems_NavigationItems__1fnFX",Item:"NavigationItems_Item__6K2Ni",active:"NavigationItems_active__3EugU"}},20:function(e,t,a){e.exports={FavoriteMovie:"FavoriteMovie_FavoriteMovie__cRJe3",Item:"FavoriteMovie_Item__1L_kG",Button:"FavoriteMovie_Button__aKwfa"}},24:function(e,t,a){e.exports={RecMovie:"RecMovie_RecMovie__WrONI",Item:"RecMovie_Item__N3nPj",Button:"RecMovie_Button__1c3If"}},29:function(e,t,a){e.exports={Toolbar:"Toolbar_Toolbar__ApScI",Logo:"Toolbar_Logo__3Lk47"}},33:function(e,t,a){e.exports={Button:"Button_Button__3R1xi",Save:"Button_Save__2is0_",Delete:"Button_Delete__3VrNe"}},45:function(e,t,a){e.exports=a.p+"static/media/movie-logo.71268b6e.png"},46:function(e,t,a){e.exports={Logo:"Logo_Logo__3Ec1t"}},47:function(e,t,a){e.exports={Content:"Layout_Content__PrDi6"}},48:function(e,t,a){e.exports={SearchResults:"SearchResults_SearchResults__2kZpi"}},50:function(e,t,a){e.exports={FavoriteMovies:"FavoriteMovies_FavoriteMovies__2Jcny"}},51:function(e,t,a){e.exports={RecMovies:"RecMovies_RecMovies__1Rs7E"}},53:function(e,t,a){e.exports=a(83)},63:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(21),o=a.n(l),i=a(15),c=(a(26),a(62),a(63),a(3)),s=a(4),u=a(6),m=a(5),d=function(e){return e.children},v=a(29),h=a.n(v),f=a(45),p=a.n(f),g=a(46),E=a.n(g),b=function(e){return r.a.createElement("div",{className:E.a.Logo},r.a.createElement("img",{src:p.a,alt:"WebsiteLogo"}))},w=a(13),_=a.n(w),y=function(e){return r.a.createElement("ul",{className:_.a.NavigationItems},r.a.createElement("li",{className:_.a.Item},r.a.createElement(i.b,{to:"/",exact:!0,activeClassName:_.a.active},"Search")),r.a.createElement("li",{className:_.a.Item},r.a.createElement(i.b,{to:"/profile",exact:!0,activeClassName:_.a.active},"Profile")),e.isAuthenticated?r.a.createElement("li",{className:_.a.Item},r.a.createElement(i.b,{to:"/logout",activeClassName:_.a.active},"LogOut")):r.a.createElement("li",{className:_.a.Item},r.a.createElement(i.b,{to:"/login",activeClassName:_.a.active},"SignIn")),e.isAuthenticated?null:r.a.createElement("li",{className:_.a.Item},r.a.createElement(i.b,{to:"/register",activeClassName:_.a.active},"Register")))},k=function(e){return r.a.createElement("header",{className:h.a.Toolbar},r.a.createElement("div",{className:h.a.Logo},r.a.createElement(b,null)),r.a.createElement("div",null,r.a.createElement(y,{isAuthenticated:e.isAuthenticated})))},S=a(47),j=a.n(S),I=a(16),O=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",isAuthenticated:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){if(console.log(localStorage.usertoken),localStorage.usertoken){var e=localStorage.usertoken,t=Object(I.a)(e);console.log("decode",t),console.log("decode",t.identity.email),this.setState({email:t.identity.email,password:t.identity.password}),""!==this.state.email&&""!==this.state.password&&this.setState({isAuthenticated:!0})}}},{key:"render",value:function(){return r.a.createElement(d,null,r.a.createElement(k,{isAuthenticated:this.state.isAuthenticated}),r.a.createElement("main",{className:j.a.Content},this.props.children))}}]),a}(n.Component),N=a(11),R=a.n(N),C=function(e){return console.log("movie id is"),console.log(e.id),r.a.createElement("div",{className:R.a.SearchResult},r.a.createElement("div",{className:R.a.Item},e.name),r.a.createElement("div",{className:R.a.Item},e.genres),r.a.createElement("div",{className:R.a.Item},e.rating),r.a.createElement("button",{className:R.a.Button,onClick:function(){return e.clicked(e.id)}},"View Details"))},H=a(48),M=a.n(H),x=function(e){var t=e.results;return r.a.createElement("div",{className:M.a.SearchResults},r.a.createElement("div",{className:R.a.SearchResult},r.a.createElement("div",{className:R.a.Item},"Movie Name"),r.a.createElement("div",{className:R.a.Item},"Genres"),r.a.createElement("div",{className:R.a.Item},"Rating"),r.a.createElement("div",{className:R.a.Item},"Movie Page")),t.map((function(t){return r.a.createElement(C,{name:t[0],id:t[1],genres:t[2],rating:t[3],clicked:e.clicked})})))},F=a(14),T=a.n(F),L=function(e){return T.a.get("/search",{params:{name:e.name}}).then((function(e){return console.log("success"),e.data}))},D=function(e){return T.a.get("/getMovieInfo",{params:{mvId:e.mvId}}).then((function(e){return console.log("success"),e.data}))},B=function(e){return T.a.get("/getPosterPath",{params:{mvId:e.mvId}}).then((function(e){return console.log("success"),e.data}))},A=function(e){return T.a.get("/checkUserFav",{params:{email:e.email,mvId:e.mvId}}).then((function(e){return console.log("success"),e.data})).catch((function(e){return e}))},P=function(e){return T.a.post("/addToFav",{email:e.email,mvId:e.mvId,title:e.title}).then((function(e){return console.log("Successfully added to Fav List"),e.data}))},U=function(e){return T.a.post("/deleteFromFav",{email:e.email,mvId:e.mvId,title:e.title}).then((function(e){return console.log("Successfully delete from Fav List"),e.data}))},J=function(e){return T.a.patch("/updateMovComment",{query:e.query}).then((function(e){return console.log(e),e.data}))},V=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={name:"",results:[],rate:""},e.componentDidMount=function(){e.setState({name:"",results:[],rate:""}),console.log(e.state)},e.onSubmit=function(t){t.preventDefault();var a={name:e.state.name,rate:e.state.rate};console.log("something something"),console.log(a),L(a).then((function(t){if(console.log("returned res",t),t.error)e.setState({results:[]});else{var a=t;e.setState({results:a})}}))},e.changeInputHandler=function(t){e.setState({name:t.target.value})},e.clickHandler=function(t){e.props.history.push("/movie/".concat(t))},e.change=function(t){e.setState({rate:t.target.value})},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("select",{onChange:this.change},r.a.createElement("option",{value:"1"},"1"),r.a.createElement("option",{value:"2"},"2"))),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{onChange:function(t){return e.changeInputHandler(t)},value:this.state.name}),r.a.createElement("button",null,"Search")),this.state.results?r.a.createElement(x,{results:this.state.results,clicked:this.clickHandler}):null)}}]),a}(n.Component),q=a(32),G=a.n(q),K=a(49),W=a(33),Y=a.n(W),Z=function(e){return r.a.createElement("button",{className:[Y.a.Button,Y.a[e.btnType]].join(" "),onClick:function(){return e.clicked()}},e.children)},Q=a(52),X=function(e){var t=Object(n.useState)(!0),a=Object(Q.a)(t,2),l=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:l?" icon-soucang2 soucang-color":"icon-soucang2",onClick:function(e){o(!l)}}))},z=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("input",{type:"text",name:"newReview",value:this.props.review,onChange:this.props.handleChange,placeholder:"New Review",autoFocus:!0,autoComplete:"off"}),r.a.createElement("button",{type:"submit"},"Add Review")))}}]),a}(n.Component),$=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return this.props.reviews.map((function(e){return r.a.createElement("div",{key:e.id},e.email," ",e.review)}))}}]),a}(n.Component),ee=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={poster_path:"",title:"",id:"",genres:"",release_year:"",vote_average:"",original_language:"",runtime:"",directors:"",actors:"",overview:"",savedToFav:!1,btnType:"Save",myemail:"",comment:"",review:"",reviews:[],loading:!0},e.handleChange=function(t){e.setState({review:t.target.value})},e.handleSubmit=function(){var t=Object(K.a)(G.a.mark((function t(a){return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("handle submit review"),a.preventDefault(),e.setState({loading:!0}),t.next=5,fetch("/addReview/"+e.state.review+"/"+e.state.id+"/"+e.state.myemail,{method:"GET"});case 5:e.getReviews(e.state.id);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.componentDidMount=function(){e.getReviews(e.props.mvId),console.log(e.props.mvId);var t={mvId:e.props.mvId};if(D(t).then((function(t){if(console.log("returned res",t),!t.error){var a=t[0];console.log(a),e.setState({title:a[0],id:a[1],genres:a[2],release_year:a[3],vote_average:a[4],original_language:a[5],runtime:a[6],directors:a[7],actors:a[8],overview:a[9]})}})),B(t).then((function(t){if(console.log("returned poster path",t),!t.error){var a=t;console.log(a),e.setState({poster_path:a})}})),console.log(e.state),localStorage.usertoken){var a=localStorage.usertoken,n=Object(I.a)(a).identity.email,r={mvId:e.props.mvId,email:n};A(r).then((function(t){console.log("returned res",t),t.error?e.setState({myemail:n}):e.setState({savedToFav:!0,myemail:n})}))}},e.clickHandler=function(){if(localStorage.usertoken)if(e.state.savedToFav){e.setState({savedToFav:!1,btnType:"Save"});var t=localStorage.usertoken,a={email:Object(I.a)(t).identity.email,mvId:e.state.id,title:e.state.title};console.log(a),U(a).then((function(e){console.log(e)}))}else{e.setState({savedToFav:!0,btnType:"Delete"});var n=localStorage.usertoken,r={email:Object(I.a)(n).identity.email,mvId:e.state.id,title:e.state.title};console.log(r),P(r).then((function(e){console.log(e)}))}},e.submitHandler=function(t){t.preventDefault();var a=localStorage.usertoken,n=Object(I.a)(a).identity.email,r={query:[e.state.comment,n,e.props.mvId]};console.log(r),J(r).then((function(e){console.log(e)}))},e.changeInputHandler=function(t){e.setState({comment:[t.target.value]})},e}return Object(s.a)(a,[{key:"getReviews",value:function(e){var t=this;console.log("getReviews got called!!!!"),fetch("/getReviews/"+e).then((function(e){return e.json()})).then((function(e){t.setState({review:"",reviews:e,loading:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,this.state.title),r.a.createElement("img",{src:this.state.poster_path,alt:"sorry no image available"}),r.a.createElement("p",null,this.state.genres),r.a.createElement("p",null,"Year: ",this.state.release_year),r.a.createElement("p",null,"Rating: ",this.state.vote_average),r.a.createElement("p",null,"Language: ",this.state.original_language),r.a.createElement("p",null,"Runtime: ",this.state.runtime),r.a.createElement("div",null,"Directors: ",this.state.directors),r.a.createElement("div",null,"Cast: ",this.state.actors),r.a.createElement("p",null,"Overview: ",this.state.overview),r.a.createElement(Z,{clicked:this.clickHandler.bind(this),btnType:this.state.btnType},"Like"),r.a.createElement(X,null),this.state.savedToFav?r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("input",{onChange:function(t){return e.changeInputHandler(t)},value:this.state.comment}),r.a.createElement("button",null,"Update your comment!")):null,r.a.createElement(z,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,value:this.state.review}),this.state.loading?r.a.createElement("h1",null,"Loading..."):r.a.createElement($,this.state))}}]),a}(n.Component),te=a(23),ae=a(17),ne=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).changeHandler=function(t){e.setState(Object(te.a)({},t.target.name,t.target.value))},e.submitHandler=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};""!==e.state.email&&""!==e.state.password||window.alert("Please fill in all fields!"),function(e){return T.a.post("/login",{email:e.email,password:e.password}).then((function(e){return e.Error&&e.error?(console.log(e),e):(localStorage.setItem("usertoken",e.data),e.data)})).catch((function(e){console.log(e)}))}(a).then((function(t){console.log(t),"object"===typeof t?(window.alert("Account not found! Please try again"),localStorage.clear()):e.props.history.push("/")}))},e.state={email:"",password:"",error:{}},e.changeHandler=e.changeHandler.bind(Object(ae.a)(e)),e.submitHandler=e.submitHandler.bind(Object(ae.a)(e)),e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e.submitHandler(t)}},r.a.createElement("div",null,r.a.createElement("label",null,"email"),r.a.createElement("input",{name:"email",type:"text",value:this.state.email,onChange:function(t){return e.changeHandler(t)}})),r.a.createElement("div",null,r.a.createElement("label",null,"password"),r.a.createElement("input",{name:"password",type:"password",value:this.state.password,onChange:function(t){return e.changeHandler(t)}})),r.a.createElement("button",null,"Login")))}}]),a}(n.Component),re=a(20),le=a.n(re),oe=function(e){return console.log(e.id),r.a.createElement("div",{className:le.a.FavoriteMovie},r.a.createElement("div",{className:le.a.Item},e.title),r.a.createElement("div",{className:le.a.Item},e.desc),r.a.createElement("button",{onClick:function(){return e.clicked(e.id)},className:le.a.Button},"View Details"))},ie=a(50),ce=a.n(ie),se=function(e){var t=e.results;return r.a.createElement("div",{className:ce.a.FavoriteMovies},t.map((function(t){return r.a.createElement(oe,{id:t.movie_id,title:t.title,desc:t.notes,clicked:e.clicked})})))},ue=a(24),me=a.n(ue),de=function(e){return console.log(e.id),r.a.createElement("div",{className:me.a.RecMovie},r.a.createElement("div",{className:me.a.Item},e.title),r.a.createElement("button",{onClick:function(){return e.clicked(e.id)},className:me.a.Button},"View Details"))},ve=a(51),he=a.n(ve),fe=function(e){var t=e.results;return r.a.createElement("div",{className:he.a.RecMovies},t.map((function(t){return r.a.createElement(de,{id:t.movie_id,title:t.title,clicked:e.clicked})})))},pe=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={email:"",favs:[[1,"h","good"],[2,"asd","like it"],[3,"akw","!!!"],[4,"kjhuiwhf","kagdfhew hejkfaef"]],recommends:[[1,"h","good"],[2,"asd","like it"],[3,"akw","!!!"],[4,"kjhuiwhf","kagdfhew hejkfaef"]]},e.clickHandler=function(t){e.props.history.push("/movie/".concat(t))},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.usertoken){var t=localStorage.usertoken,a=Object(I.a)(t),n=a.identity.email;this.setState({email:a.identity.email}),console.log("iden",a.identity),console.log(this.state.email);var r={email:n};(function(e){return T.a.get("/getUserFav",{params:{email:e.email}}).then((function(e){return console.log("success"),e.data})).catch((function(e){return e}))})(r).then((function(t){console.log(t),t.movies&&e.setState({favs:t.movies,email:n})})),function(e){return T.a.get("/getUserFav",{params:{email:e.email}}).then((function(e){return console.log("success"),e.data})).catch((function(e){return e}))}(r).then((function(t){console.log(t),t.movies&&e.setState({recommends:t.movies,email:n})}))}else this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("table",{className:"table col-md-6 mx-auto"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:"badge badge-dark text-white col-8"},"User: ",this.state.email," "),r.a.createElement("td",null,this.state.username))))),r.a.createElement("div",null,r.a.createElement("h3",null,"Favorite List"),r.a.createElement("div",null,r.a.createElement(se,{results:this.state.favs,clicked:this.clickHandler}))),r.a.createElement("div",null,r.a.createElement("h3",null,"Recommended Movies"),r.a.createElement("div",null,r.a.createElement(fe,{results:this.state.recommends,clicked:this.clickHandler}))))}}]),a}(n.Component),ge=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).changeHandler=function(t){e.setState(Object(te.a)({},t.target.name,t.target.value))},e.submitHandler=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};""!==e.state.email&&""!==e.state.password||window.alert("Please fill in all fields!"),function(e){return T.a.post("/register",{email:e.email,password:e.password}).then((function(e){return e.success?(window.alert("Successfully registered!"),e.data):(console.log(typeof e),e)})).catch((function(t){""===e.email||""===e.password?window.alert("Please fill all the fields"):window.alert("This email has already registered.")}))}(a).then((function(t){"object"===typeof t?(console.log("res",t),e.props.history.push("/login")):localStorage.clear()}))},e.state={email:"",password:"",error:{}},e.changeHandler=e.changeHandler.bind(Object(ae.a)(e)),e.submitHandler=e.submitHandler.bind(Object(ae.a)(e)),e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(t){return e.submitHandler(t)}},r.a.createElement("div",null,r.a.createElement("label",null,"email"),r.a.createElement("input",{name:"email",type:"text",value:this.state.email,onChange:function(t){return e.changeHandler(t)}})),r.a.createElement("div",null,r.a.createElement("label",null,"password"),r.a.createElement("input",{name:"password",type:"password",value:this.state.password,onChange:function(t){return e.changeHandler(t)}})),r.a.createElement("button",null,"Register")))}}]),a}(n.Component),Ee=a(2),be=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(O,null,r.a.createElement(Ee.c,null,r.a.createElement(Ee.a,{path:"/",exact:!0,component:V}),r.a.createElement(Ee.a,{path:"/movie/:id",exact:!0,component:function(e){return r.a.createElement(ee,{mvId:e.match.params.id})}}),r.a.createElement(Ee.a,{path:"/login",exact:!0,component:ne}),r.a.createElement(Ee.a,{path:"/register",exact:!0,component:ge}),r.a.createElement(Ee.a,{path:"/profile",exact:!0,component:pe}))))}}]),a}(n.Component),we=Object(Ee.f)(be);o.a.render(r.a.createElement(i.a,null,r.a.createElement(we,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.589ba906.chunk.js.map